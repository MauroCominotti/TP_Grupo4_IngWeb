@using RafaelaColabora.Services
@inject CategoriesService _categoryService

<EditForm Model="@post" OnValidSubmit="@OnValidSubmit">
    <DataAnnotationsValidator />
    <div class="form-group">
        <label>UserId:</label>
        <div>
            <input type="text" class="form-control" disabled value="@FKUsername" />
            <ValidationMessage For="@(() => post.UserId)" />
        </div>
    </div>
    <div class="form-group">
        <label>Categoria:</label>
        <div>
            @*<InputSelect class="form-control" @bind-Value="@post.CategoryId">
                    @if (categories != null)
                    {
                        @foreach (var category in categories)
                        {
                            <option value=@category.Id>@category.Description</option>
                        }
                    }
                </InputSelect>*@
            <select @bind="post.CategoryId" class="form-control">
                <option value="">Seleccione una opcion:</option>
                @if (categories != null)
                {
                    @foreach (var category in categories)
                    {
                        <option value=@category.Id>@category.Description</option>
                    }
                }
            </select>
            <ValidationMessage For="@(() => post.CategoryId)" />
        </div>
    </div>
    <div class="form-group">
        <label>Descripcion:</label>
        <div>
            <InputText class="form-control" @bind-Value="@post.Description" />
            <ValidationMessage For="@(() => post.Description)" />
        </div>
    </div>
    <div class="form-group ">
        <div>
            <label>Links:</label>
            <div>
                <InputText class="form-control" @bind-Value="@post.Links" />
                <ValidationMessage For="@(() => post.Links)" />
            </div>
        </div>
    </div>
    <div class="form-group ">
        <div>
            <label>Phone:</label>
            <div>
                <InputText class="form-control" @bind-Value="@post.Phone" />
                <ValidationMessage For="@(() => post.Phone)" />
            </div>
        </div>
    </div>
    <div class="form-group ">
        <div>
            <label>AlternativePhone:</label>
            <div>
                <InputText class="form-control" @bind-Value="@post.AlternativePhone" />
                <ValidationMessage For="@(() => post.AlternativePhone)" />
            </div>
        </div>
    </div>
    <div class="form-group ">
        <div>
            <label>AlternativeEmail:</label>
            <div>
                <InputText class="form-control" @bind-Value="@post.AlternativeEmail" />
                <ValidationMessage For="@(() => post.AlternativeEmail)" />
            </div>
        </div>
    </div>
    <button type="submit" class="btn btn-success">
        @ButtonText
    </button>
</EditForm>

@code {
    [Parameter] public Post post { get; set; }
    [Parameter] public string ButtonText { get; set; } = "Save";
    [Parameter] public EventCallback OnValidSubmit { get; set; }
    [Parameter] public string FKUsername { get; set; }
    public List<Category> categories { get; set; }

    protected override async Task OnInitializedAsync()
    {
        categories = await _categoryService.GetCategories();
    }
}
